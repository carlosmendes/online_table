<% provide(:menu, "home") %>


<% if !current_order.nil? %>
	Call Waiter
	Pay
	current.order.id
	Add Products
<% end %>

<% if manager? or waiter? %>
<div ng-app="pendingApp" ng-controller="PendingController as store">
	<div class="section_header">{{store.pending.length}} Pending Requests</div>
	<div class="table-responsive">
	  <table class="table table-striped table-hover">
	    <thead>
	      <tr>
            <th>Order</th>
            <th>Time</th>
            <th>Table</th>
            <th>Quantity</th>
            <th>Product</th>
            <th>Status</th>
	        <th></th>
	      </tr>
	    </thead>
	
	    <tbody>
	      <tr ng-repeat="line in store.pending">
            <td>{{ line.order_id }}</td>
            <td>{{ line.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
            <td>{{ line.table.id }}</td>
            <td>{{ line.quantity }}</td>
            <td>{{ line.product.short_name }}</td>
            <td>{{ line.status }}</td>
	        <td>
	        	<button class="btn btn-sm" ng-click="process(line.id)" ng-if="processVisible(line.status)">Process</button>
	        	<button class="btn btn-sm" ng-click="deliver(line.id)">Deliver</button>
	        	<i class="fa fa-trash" ng-click="cancel(line)"></i>
	        </td>
	      </tr>
	    </tbody>
	  </table>
	</div>
</div>
<% end %>
